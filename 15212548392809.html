<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  python-numpy note - Time渐行渐远
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="Time渐行渐远" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:dmlcoding.com ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        <li id=""><a target="_self" href="collections.html">COLLECTION</a></li>
        
        <li id=""><a target="_self" href="tools.html">TOOLS</a></li>
        
        <li id=""><a target="_blank" href="about.html">ABOUT</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="http://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; Time渐行渐远</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
       
       <li><a href="index.html">HOME</a></li>
    <li><a href="archives.html">Archives</a></li>
    <li><a href="about.html">ABOUT</a></li>

    <li><label>Categories</label></li>

        
            <li><a href="BigData.html">BigData</a></li>
        
            <li><a href="Python.html">Python</a></li>
        
            <li><a href="Linux.html">Linux</a></li>
        
            <li><a href="Life.html">Life</a></li>
        
            <li><a href="Spark.html">Spark</a></li>
        
            <li><a href="Hive.html">Hive</a></li>
        
            <li><a href="Yarn.html">Yarn</a></li>
        
            <li><a href="Scala.html">Scala</a></li>
        
            <li><a href="VPS.html">VPS</a></li>
        
            <li><a href="MachineLearning.html">MachineLearning</a></li>
        
            <li><a href="Writer.html">Writer</a></li>
        
            <li><a href="Shell.html">Shell</a></li>
        
            <li><a href="Algorithm.html">Algorithm</a></li>
        
            <li><a href="Mac.html">Mac</a></li>
        
            <li><a href="Presto.html">Presto</a></li>
        
            <li><a href="Mysql.html">Mysql</a></li>
        
            <li><a href="Maven.html">Maven</a></li>
        
            <li><a href="Kafka.html">Kafka</a></li>
        
            <li><a href="Java.html">Java</a></li>
        
            <li><a href="DevTools.html">DevTools</a></li>
        
            <li><a href="Hbase.html">Hbase</a></li>
        
            <li><a href="ELK.html">ELK</a></li>
        
            <li><a href="Druid.html">Druid</a></li>
        
            <li><a href="Docker.html">Docker</a></li>
        
            <li><a href="DesignPattern.html">DesignPattern</a></li>
        
            <li><a href="Computer.html">Computer</a></li>
        
            <li><a href="Redis.html">Redis</a></li>
        
            <li><a href="Zookeeper.html">Zookeeper</a></li>
        
            <li><a href="BlockChain.html">BlockChain</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
  $(function(){
    $('#menu_item_index').addClass('is_active');
  });
</script>
<div class="row">
  <div class="large-8 medium-8 columns">
      <div class="markdown-body article-wrap">
       <div class="article">
          
          <h1>python-numpy note</h1>
     
        <div class="read-more clearfix">
          <span class="date">2017/7/22</span>

          <span>posted in&nbsp;</span> 
          
              <span class="posted-in"><a href='Python.html'>Python</a></span>
           
         
          <span class="comments">
            

            
          </span>

        </div>
      </div><!-- article -->

      <div class="article-content">
      <h1 id="toc_0">numpy创建ndarray</h1>

<ul>
<li>一种由相同元素组成的多维数组,元素数量是事先给定好的</li>
<li>元素的数据类型由dtype对象来指定,每个ndarry只有一种dtype类型</li>
<li>ndarray的大小固定,创建好数组大小是不会再发生改变的</li>
</ul>

<span id="more"></span><!-- more -->

<pre><code class="language-python">import numpy as np
</code></pre>

<pre><code class="language-python"># 可以用help方法来查看这个函数的使用方法
help(np.array)
</code></pre>

<h2 id="toc_1">用python内置数组创建ndarray</h2>

<pre><code class="language-python"># 用一维数组创建
np.array([1,2,3])
</code></pre>

<pre><code>array([1, 2, 3])
</code></pre>

<pre><code class="language-python"># 用元组创建
np.array((1,2,3))
</code></pre>

<pre><code>array([1, 2, 3])
</code></pre>

<pre><code class="language-python"># 用多维数组
np.array([[1,2,3,4],
          [5,6,7,8]])
</code></pre>

<pre><code>array([[1, 2, 3, 4],
       [5, 6, 7, 8]])
</code></pre>

<pre><code class="language-python"># 创建三维数组
np.array([[[1,2,3],[2,3,4]],[[4,5,6],[7,8,9]]
])
</code></pre>

<pre><code>array([[[1, 2, 3],
        [2, 3, 4]],

       [[4, 5, 6],
        [7, 8, 9]]])
</code></pre>

<h2 id="toc_2">用numpy内置函数创建ndarray</h2>

<pre><code class="language-python"># 通过zeros创建数组,创建元素全为零的数组
# 参数为一个元组,元组表示你想创建一个几维的数组
# 创建一个3*3的数组,元素初始化都为0
np.zeros((3,3))

# 创建一个2*3*3的三维数组,元素初始化都为0
np.zeros((2,3,3))
</code></pre>

<pre><code>array([[[0., 0., 0.],
        [0., 0., 0.],
        [0., 0., 0.]],

       [[0., 0., 0.],
        [0., 0., 0.],
        [0., 0., 0.]]])
</code></pre>

<pre><code class="language-python"># 通过ones创建数组,创意元素都为1的数组
np.ones((3,4))
</code></pre>

<pre><code>array([[1., 1., 1., 1.],
       [1., 1., 1., 1.],
       [1., 1., 1., 1.]])
</code></pre>

<pre><code class="language-python"># 通过empty创建未初始化的数组
np.empty((2,3))
</code></pre>

<pre><code>array([[0., 0., 0.],
       [0., 0., 0.]])
</code></pre>

<h2 id="toc_3">ndarray的其他创建方式</h2>

<pre><code class="language-python"># arange函数,类似python内置的range
np.arange(9)
</code></pre>

<pre><code>array([0, 1, 2, 3, 4, 5, 6, 7, 8])
</code></pre>

<pre><code class="language-python">np.arange(1,9)
</code></pre>

<pre><code>array([1, 2, 3, 4, 5, 6, 7, 8])
</code></pre>

<pre><code class="language-python">np.arange(1,9,2)
np.arange(9,1,-1)
</code></pre>

<pre><code>array([9, 8, 7, 6, 5, 4, 3, 2])
</code></pre>

<pre><code class="language-python"># linspace函数,生成等差数列
# 生成1到10的数,一共有5个元素
np.linspace(1,10,5)
</code></pre>

<pre><code>array([ 1.  ,  3.25,  5.5 ,  7.75, 10.  ])
</code></pre>

<pre><code class="language-python"># logspace生成等比数列
# 10的0次方开始,到10的2次方结束,一共生成5个元素
np.logspace(0,2,5)
</code></pre>

<pre><code>array([  1.        ,   3.16227766,  10.        ,  31.6227766 ,
       100.        ])
</code></pre>

<pre><code class="language-python"># 修改base为2,默认底数是10
np.logspace(0,2,5,base=2)
</code></pre>

<pre><code>array([1.        , 1.41421356, 2.        , 2.82842712, 4.        ])
</code></pre>

<pre><code class="language-python"># random函数,生成随机数
np.random.random((3,3))
</code></pre>

<pre><code>array([[0.32521681, 0.46044314, 0.19938466],
       [0.38477235, 0.20250328, 0.93452861],
       [0.0615017 , 0.1795197 , 0.32724319]])
</code></pre>

<pre><code class="language-python"># randint 生成随机整数,从1到9,一共是个3*3的数组
np.random.randint(1,9,size=(3,3))
</code></pre>

<pre><code>array([[6, 1, 2],
       [2, 5, 5],
       [6, 7, 3]])
</code></pre>

<pre><code class="language-python"># randn 返回一个样本,具有标准正态分布
np.random.randn(3,3)
</code></pre>

<pre><code>array([[-0.57476519,  0.45673427,  0.26634586],
       [-1.98015823, -1.25879457, -1.18650781],
       [ 0.90624497, -1.16062802,  0.49804173]])
</code></pre>

<pre><code class="language-python"># rand 生成0到1直接的随机数
np.random.rand(9)
</code></pre>

<pre><code>array([0.23177845, 0.33177202, 0.72181294, 0.24416673, 0.41005128,
       0.6275457 , 0.40247175, 0.90591392, 0.46705692])
</code></pre>

<h1 id="toc_4">ndarray对象属性</h1>

<h2 id="toc_5">修改ndarray对象类型dtype</h2>

<pre><code class="language-python"># ndim 数组维度的个数,轴的个数被称作秩
arr=np.random.randint(1,9,size=(3,3))
print(arr.ndim)
</code></pre>

<pre><code>2
</code></pre>

<pre><code class="language-python"># shape 数组的维度
arr=np.random.randint(1,9,size=(3,3))
print(arr.shape)
</code></pre>

<pre><code>(3, 3)
</code></pre>

<pre><code class="language-python"># dtype ndarray的元素类型
arr=np.random.randint(1,9,size=(3,3))
print(arr.dtype)

# itemsize数组中每个元素的字节大小
print(arr.itemsize)

# size ndarray里面的元素个数
print(arr.size)
</code></pre>

<pre><code>int64
8
9
</code></pre>

<pre><code class="language-python">arr2=np.array([1,2,3,4])
# 查看元素类型
print(arr2.dtype)

# 修改元素类型
arr3=arr2.astype(float)
print(arr3.dtype)
arr4=np.array([1,2,3,4],dtype=float)
print(arr4.dtype)
</code></pre>

<pre><code>int64
float64
float64
</code></pre>

<h2 id="toc_6">修改ndarray的形状shape</h2>

<pre><code class="language-python"># 修改ndarray形状,要求修改后乘积不变
arr=np.random.randint(1,9,size=(2,5))
print(arr)
print(arr.shape)
arr.shape=(5,2)
print(arr)
</code></pre>

<pre><code>[[5 8 8 1 8]
 [5 5 8 5 6]]
(2, 5)
[[5 8]
 [8 1]
 [8 5]
 [5 8]
 [5 6]]
</code></pre>

<pre><code class="language-python">arr=np.random.randint(1,9,size=(2,5))
# -1 系统帮你算另外一部分
arr.shape=(5,-1)
arr
</code></pre>

<pre><code>array([[2, 8],
       [1, 7],
       [8, 7],
       [3, 7],
       [8, 5]])
</code></pre>

<pre><code class="language-python"># reshape修改后,创建的数组和原先的数组映射.修改后就都修改了
arr=np.arange(9)
print(arr)
arr2=arr.reshape(3,3)
print(arr2)
arr2[0][1]=100
print(arr)
print(arr2)
</code></pre>

<pre><code>[0 1 2 3 4 5 6 7 8]
[[0 1 2]
 [3 4 5]
 [6 7 8]]
[  0 100   2   3   4   5   6   7   8]
[[  0 100   2]
 [  3   4   5]
 [  6   7   8]]
</code></pre>

<pre><code class="language-python">arr=np.arange(9).reshape(3,3)
arr
</code></pre>

<pre><code>array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]])
</code></pre>

<h1 id="toc_7">numpy的基本操作</h1>

<h2 id="toc_8">数组与标量,数组之间的运算</h2>

<ul>
<li>1.数组不用循环即可对每个元素执行批量的算术运算操作,这个过程叫做矢量化,即用数组表达式代替循环的做法</li>
<li>2.矢量化数组运算性能比纯Python方式快上一两个数据级</li>
<li>3.大小相等的两个数组之间的任何算术运算都会将其运算应用到元素级别的操作上</li>
</ul>

<p><strong>在numpy中,大小相等的数组之间的的运算,为元素级运算,即只用于位置相同的元素之间,所得的运算结果组成一个新的数组,运算结果的位置跟操作数位置相同</strong></p>

<h3 id="toc_9">数组与标量之间的运算</h3>

<pre><code class="language-python">arr=np.arange(9).reshape(3,3)
print(arr)
print(arr+2)
print(arr*2)
</code></pre>

<pre><code>[[0 1 2]
 [3 4 5]
 [6 7 8]]
[[ 2  3  4]
 [ 5  6  7]
 [ 8  9 10]]
[[ 0  2  4]
 [ 6  8 10]
 [12 14 16]]
</code></pre>

<h3 id="toc_10">数组与数组之间的运算</h3>

<pre><code class="language-python">arr=np.array([1,1,2,3])
arr2=np.array([2,1,6,3])
arr3=arr+arr2
arr3
</code></pre>

<pre><code>array([3, 2, 8, 6])
</code></pre>

<pre><code class="language-python">arr1=np.array([
    [10,20,30],
    [40,50,60]
])
arr2=np.array([
    [1,2,3],
    [4,5,6]
])
print(arr1)
print(arr2)
</code></pre>

<pre><code>[[10 20 30]
 [40 50 60]]
[[1 2 3]
 [4 5 6]]
</code></pre>

<pre><code class="language-python">print(arr1+arr2)
</code></pre>

<pre><code>[[11 22 33]
 [44 55 66]]
</code></pre>

<h2 id="toc_11">数组的矩阵积</h2>

<ul>
<li>矩阵:多维数组即矩阵</li>
<li>矩阵积(matrix product):两个二维矩阵(行和列的矩阵)满足第一个矩阵的列数与第二个矩阵的行数相同,那么可以进行矩阵的乘法,即矩阵积,矩阵积不是元素级的运算.也称为点积,数量积.</li>
<li>[M,N]*[N,Y]=<a href="%E7%B1%BB%E4%BC%BC%E8%BF%99%E6%A0%B7">M,Y</a></li>
<li>dot函数来实现</li>
</ul>

<pre><code class="language-python"># 每行为每个部门1,2,3,每列为每个产品A,B,C
# 那么就是3个部门,3个产品
arr=np.array([
    [120,60,220],
    [115,23,201],
    [132,48,230]
])

# 每行为产品A,B,C,列为产品单价和产品体积
arr2=np.array([
    [12.34,0.04],
    [204.56,2.34],
    [9.89,0.45]
])


</code></pre>

<pre><code class="language-python"># 求每个部门的总收入,以及每个部门的产品共占了多少体积
# 为了实现这个需求,就可以将两个矩阵进行相乘

# 举例: 120*12+60*204.56+220*9.89=15930.2 
# 行列对应元素相乘后累加
# 矩阵相乘使用dot函数
arr.dot(arr2)
</code></pre>

<pre><code>array([[15930.2 ,   244.2 ],
       [ 8111.87,   148.87],
       [13722.46,   221.1 ]])
</code></pre>

<h2 id="toc_12">ndarray多维数组的索引和切片</h2>

<p>|  | 0 | 1  |  2 |  3 |<br/>
|:-|:--|:---|:---|:---|<br/>
| 0 |0,0|0,1|0,2 |0,3 |<br/>
| 1 |1,0|1,1|1,2 |1,3 |<br/>
| 2 |2,0|2,1|2,2 |2,3 |</p>

<pre><code class="language-python">arr=np.random.randint(1,9,size=(2,3,3))
print(arr)
</code></pre>

<pre><code>[[[4 5 1]
  [3 5 3]
  [3 7 5]]

 [[8 3 1]
  [3 8 3]
  [3 1 7]]]
</code></pre>

<h3 id="toc_13">ndarray的索引</h3>

<p>和python的列表索引也是一样的</p>

<pre><code class="language-python"># 一个中括号表示一个维度
print(arr[0][0][1])

# 通过逗号分隔,每部分是一个维度.比用中括号看起来更简单
print(arr[0,0,1])
</code></pre>

<pre><code>5
5
</code></pre>

<h3 id="toc_14">ndarray的切片</h3>

<p>和python的列表切片也是一样的</p>

<pre><code class="language-python"># 冒号代表对这一维度的所有进行切片
print(arr[:,:,:])

# 取每一维度的第一列
print(arr[:,:,0])
print(arr[:,:,0:2])
</code></pre>

<pre><code>[[[4 5 1]
  [3 5 3]
  [3 7 5]]

 [[8 3 1]
  [3 8 3]
  [3 1 7]]]
[[4 3 3]
 [8 3 3]]
[[[4 5]
  [3 5]
  [3 7]]

 [[8 3]
  [3 8]
  [3 1]]]
</code></pre>

<pre><code class="language-python">num=np.array([
    [0,1,2,3,4],
    [5,6,7,8,9]
])
</code></pre>

<pre><code class="language-python"># 取第一行的所有元素
num[1,:]

# 取第一列的所有元素
num[:,0]
# 取第二列的所有元素
num[:,1]
</code></pre>

<pre><code>array([1, 6])
</code></pre>

<h3 id="toc_15">ndarray的高级索引</h3>

<p>如果一个ndarray是非元组序列,数据类型为<strong>整数</strong>或<strong>布尔值</strong>的ndarray,或者至少一个元素为序列对象的元组,我们就能够用它来索引ndarray</p>

<p>高级索引始终返回数据的副本.与此相反,切片只提供了一个视图.</p>

<h4 id="toc_16">整数索引</h4>

<pre><code class="language-python">x=np.array([
    [1,2],
    [3,4],
    [5,6]
])

y=x[[0,1,2],[0,1,0]]

# 该结果包括数组中(0,0)，(1,1)和(2,0)位置处的元素。
print(y)
</code></pre>

<pre><code>[1 4 5]
</code></pre>

<pre><code class="language-python"># 下面的示例获取了 4X3 数组中的每个角处的元素。 
# 行索引是[0,0]和[3,3]，而列索引是[0,2]和[0,2]。
x=np.array([
    [0,1,2],
    [3,4,5],
    [6,7,8],
    [9,10,11]
])
print(&#39;数组原样:&#39;)
print(x)
print(&#39;~&#39;*30)
rows=np.array([[0,0],[3,3]])
cols=np.array([[0,2],[0,2]])
y=x[rows,cols]
print(&#39;这个数组的每个角处的元素是:&#39;)
print(y)
</code></pre>

<pre><code>数组原样:
[[ 0  1  2]
 [ 3  4  5]
 [ 6  7  8]
 [ 9 10 11]]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
这个数组的每个角处的元素是:
[[ 0  2]
 [ 9 11]]
</code></pre>

<h4 id="toc_17">布尔索引</h4>

<p>当结果对象是布尔运算(例如比较运算符)的结果时,将使用此类型的高级索引.<br/><br/>
过滤空值,挺好.</p>

<pre><code class="language-python"># 这个例子中，大于 5 的元素会作为布尔索引的结果返回。
x=np.array([
    [0,1,2],
    [3,4,5],
    [6,7,8],
    [9,10,11]
])

print(x&gt;5)

print(&#39;大于5的元素是:&#39;)
print(x[x&gt;5])

</code></pre>

<pre><code>[[False False False]
 [False False False]
 [ True  True  True]
 [ True  True  True]]
大于5的元素是:
[ 6  7  8  9 10 11]
</code></pre>

<pre><code class="language-python"># 这个例子使用了`~(取补运算符)`来过滤NaN
a=np.array([np.nan,1,2,np.nan,3,4,5])
print(a)
print(a[~np.isnan(a)])
</code></pre>

<pre><code>[nan  1.  2. nan  3.  4.  5.]
[1. 2. 3. 4. 5.]
</code></pre>

<pre><code class="language-python"># 从数组中过滤掉非复数元素
a = np.array([1,  2+6j,  5,  3.5+5j])  
print(a[np.iscomplex(a)])
</code></pre>

<pre><code>[2. +6.j 3.5+5.j]
</code></pre>

<h1 id="toc_18">Numpy-广播</h1>

<ul>
<li>广播是指Numpy在算术运算期间处理不同形状的数组的能力.</li>
<li>对数组的算术运算通常在相应的元素上进行.</li>
<li>如果两个阵列具有完全相同的形状,则这些操作被无缝执行.</li>
</ul>

<pre><code class="language-python"># 当两个数组的形状相同,运算没毛病
a=np.array([1,2,3,4])
b=np.array([10,20,30,40])
c=a*b
print(c)
</code></pre>

<pre><code>[ 10  40  90 160]
</code></pre>

<p>如果两个数组的维数不相同,则元素到元素的操作是不可能的.<br/>
然而,在Numpy中仍然可以对形状不相似的数组进行操作,<strong>因为它拥有广播功能.</strong><br/>
较小的数组会广播到较大数组的大小,以便使它们的形状可兼容.</p>

<p>如果满足一下规则,则可以进行广播:<br/>
+ ndim较小的数组会在前面追加一个长度为1的维度.<br/>
+ 输出数组的每个维度的大小是输入数组该维度大小的最大值.</p>

<p>未完待续...</p>

<h1 id="toc_19">NumPy-数组上的迭代</h1>

<ul>
<li>Numpy包含一个迭代器对象numpy.nditer.</li>
<li>她是一个有效的多维迭代器对象,可以用于在数组上进行迭代.</li>
<li>数组的每个元素可使用python的标准Iterator接口来访问</li>
</ul>

<h2 id="toc_20">迭代方式</h2>

<pre><code class="language-python">a=np.arange(0,60,5).reshape(3,4)
print(&#39;--- 原始数组 ---&#39;)
print(a)
print(&#39;~&#39;*30)
print(&#39;--- 进行迭代 ---&#39;)
for x in np.nditer(a):
    print(x)
</code></pre>

<pre><code>--- 原始数组 ---
[[ 0  5 10 15]
 [20 25 30 35]
 [40 45 50 55]]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
--- 进行迭代 ---
0
5
10
15
20
25
30
35
40
45
50
55
</code></pre>

<pre><code class="language-python">b=a.T
print(&#39;--- 原始数组进行转置 ---&#39;)
print(b)
for x in np.nditer(b):
    print(x,end=&#39; &#39;)
</code></pre>

<pre><code>--- 原始数组进行转置 ---
[[ 0 20 40]
 [ 5 25 45]
 [10 30 50]
 [15 35 55]]
0 5 10 15 20 25 30 35 40 45 50 55 
</code></pre>

<h2 id="toc_21">迭代顺序</h2>

<p>如果相同元素使用 F 风格顺序存储，则迭代器选择以更有效的方式对数组进行迭代。</p>

<pre><code class="language-python">a=np.arange(0,60,5).reshape(3,4)
print(&#39;原始数组&#39;)
print(a)
b=a.T
print(&#39;原始数组的转置&#39;)
print(b)
print(&#39;以 C 风格顺序排序&#39;)
c=b.copy(order=&#39;C&#39;)
print(c)
print(&quot;以 C 来进行迭代&quot;)
for x in np.nditer(c):
    print(x,end=&#39; &#39;)

print(&#39;以 F 风格顺序排序&#39;)
c=b.copy(order=&#39;F&#39;)
print(c)
print(&quot;以 F 来进行迭代&quot;)
for x in np.nditer(c):
    print(x,end=&#39; &#39;)

</code></pre>

<pre><code>原始数组
[[ 0  5 10 15]
 [20 25 30 35]
 [40 45 50 55]]
原始数组的转置
[[ 0 20 40]
 [ 5 25 45]
 [10 30 50]
 [15 35 55]]
以 C 风格顺序排序
[[ 0 20 40]
 [ 5 25 45]
 [10 30 50]
 [15 35 55]]
以 C 来进行迭代
0 20 40 5 25 45 10 30 50 15 35 55 以 F 风格顺序排序
[[ 0 20 40]
 [ 5 25 45]
 [10 30 50]
 [15 35 55]]
以 F 来进行迭代
0 5 10 15 20 25 30 35 40 45 50 55 
</code></pre>

<pre><code class="language-python"># 可以通过显示提醒,来强制nditer对象使用某种顺序
a=np.arange(0,60,5).reshape(3,4)
print(&quot;以 C 来进行迭代:&quot;)
for x in np.nditer(a,order=&#39;C&#39;):
    print(x,end=&#39; &#39;)
print(&#39;\n&#39;+&#39;~&#39;*40)
print(&quot;以 F 来进行迭代:&quot;)
for x in np.nditer(a,order=&#39;F&#39;):
    print(x,end=&#39; &#39;)
</code></pre>

<pre><code>以 C 来进行迭代:
0 5 10 15 20 25 30 35 40 45 50 55 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
以 F 来进行迭代:
0 20 40 5 25 45 10 30 50 15 35 55 
</code></pre>

<h2 id="toc_22">迭代器修改数组的值</h2>

<ul>
<li>nditer对象有另一个可选参数<code>op_flags</code>.其默认值为只读.</li>
<li>但可以设置为读写或只写模式.</li>
<li>这将允许使用此迭代器修改数组的元素</li>
</ul>

<pre><code class="language-python">a=np.arange(0,60,5).reshape(3,4)
print(&quot;原始数组:&quot;)
print(a)
for x in np.nditer(a,op_flags=[&#39;readwrite&#39;]):
    x[...]=2*x

print(&#39;修改后的数组是:&#39;)
print(a)
</code></pre>

<pre><code>原始数组:
[[ 0  5 10 15]
 [20 25 30 35]
 [40 45 50 55]]
修改后的数组是:
[[  0  10  20  30]
 [ 40  50  60  70]
 [ 80  90 100 110]]
</code></pre>

<h2 id="toc_23">迭代器外部循环</h2>

<p>nditer类的构造器拥有<code>flags</code>参数</p>

<pre><code class="language-python"># 迭代器遍历每列的一维数组
print(a)
print(&quot;~&quot;*50)
for x in np.nditer(a,flags=[&#39;external_loop&#39;],order=&#39;F&#39;):
    print(x,end=&#39; &#39;)
</code></pre>

<pre><code>[[  0  10  20  30]
 [ 40  50  60  70]
 [ 80  90 100 110]]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[ 0 40 80] [10 50 90] [ 20  60 100] [ 30  70 110] 
</code></pre>

<h1 id="toc_24">ndarray-数组拉伸与合并</h1>

<ul>
<li>数组拉伸np.tile（A，rep）函数可以将数组A进行拉伸，沿着A的维度重复rep次</li>
<li>对于ndarray数组而言，多个数组可以执行合并操作，合并的方式有多种。</li>
<li>Stack(arrays,axis=0):沿着新的轴加入一系列数组</li>
<li>vstack（）：堆栈数组垂直顺序（行）</li>
<li>hstack（）：堆栈数组水平顺序（列）</li>
</ul>

<pre><code class="language-python">arr=np.array([[3,9],[1,2]])
arr
</code></pre>

<pre><code>array([[3, 9],
       [1, 2]])
</code></pre>

<pre><code class="language-python"># 横向拉伸2次
np.tile(arr,2)
</code></pre>

<pre><code>array([[3, 9, 3, 9],
       [1, 2, 1, 2]])
</code></pre>

<pre><code class="language-python">np.tile(arr,6)
</code></pre>

<pre><code>array([[3, 9, 3, 9, 3, 9, 3, 9, 3, 9, 3, 9],
       [1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2]])
</code></pre>

<pre><code class="language-python">np.tile(arr,(3,1))
</code></pre>

<pre><code>array([[3, 9],
       [1, 2],
       [3, 9],
       [1, 2],
       [3, 9],
       [1, 2]])
</code></pre>

<pre><code class="language-python">np.tile(arr,(3,4))
</code></pre>

<pre><code>array([[3, 9, 3, 9, 3, 9, 3, 9],
       [1, 2, 1, 2, 1, 2, 1, 2],
       [3, 9, 3, 9, 3, 9, 3, 9],
       [1, 2, 1, 2, 1, 2, 1, 2],
       [3, 9, 3, 9, 3, 9, 3, 9],
       [1, 2, 1, 2, 1, 2, 1, 2]])
</code></pre>

<h2 id="toc_25">stack</h2>

<blockquote>
<p>Stack(arrays,axis=0):沿着新的轴加入一系列数组</p>
</blockquote>

<p>相当于加一层维度</p>

<pre><code class="language-python">a=[1,2,3]
b=[4,5,6]
</code></pre>

<pre><code class="language-python"># 默认axis=0
np.stack((a,))
</code></pre>

<pre><code>array([[1, 2, 3]])
</code></pre>

<pre><code class="language-python">np.stack((a,b))
</code></pre>

<pre><code>array([[1, 2, 3],
       [4, 5, 6]])
</code></pre>

<pre><code class="language-python">np.stack((a,),axis=1)
</code></pre>

<pre><code>array([[1],
       [2],
       [3]])
</code></pre>

<h1 id="toc_26">常用一元函数</h1>

<p><img src="media/15212548392809/15213430309763.jpg" alt=""/></p>

<p><img src="media/15212548392809/15213430461194.jpg" alt=""/></p>

<pre><code class="language-python">arr=np.array([-1,2,-3])
arr
</code></pre>

<pre><code>array([-1,  2, -3])
</code></pre>

<pre><code class="language-python"># 取绝对值
np.abs(arr)
</code></pre>

<pre><code>array([1, 2, 3])
</code></pre>

<pre><code class="language-python"># 计算各个元素的正负号
np.sign(arr)
</code></pre>

<pre><code>array([-1,  1, -1])
</code></pre>

<pre><code class="language-python"># 向上取整
np.ceil([1.2,1.4,1.7])
</code></pre>

<pre><code>array([ 2.,  2.,  2.])
</code></pre>

<pre><code class="language-python"># 向下取整
np.floor([1.2,1.3,1.6])
</code></pre>

<pre><code>array([ 1.,  1.,  1.])
</code></pre>

<pre><code class="language-python"># 四舍五入取整
np.rint([1.2,1.3,1.6])
</code></pre>

<pre><code>array([ 1.,  1.,  2.])
</code></pre>

<pre><code class="language-python"># 分别返回一个数的小数部分和整数部分
np.modf([1.2,7.8])
</code></pre>

<pre><code>(array([ 0.2,  0.8]), array([ 1.,  7.]))
</code></pre>

<h1 id="toc_27">常用二元函数</h1>

<p><img src="media/15212548392809/15213430758071.jpg" alt=""/></p>

<pre><code class="language-python"># 元素级的求模计算(除法取余)
np.mod(4,3) # 1
np.mod([4,8],[3,5]) # [1,3]
</code></pre>

<pre><code>array([1, 3])
</code></pre>

<h1 id="toc_28">聚合函数</h1>

<ul>
<li>求和:np.sum()</li>
<li>平均值:np.mean</li>
<li>最大值:np.max</li>
<li>最小值:np.min</li>
<li>总体标准差:np.std</li>
<li>......</li>
</ul>

<pre><code class="language-python">arr.sum()
</code></pre>

<pre><code>-2
</code></pre>

<h1 id="toc_29">where</h1>

<pre><code class="language-python">arr1=np.array(
    [
    [1,2,np.NaN],
    [4,5,np.NaN]
])
arr1
</code></pre>

<pre><code>array([[  1.,   2.,  nan],
       [  4.,   5.,  nan]])
</code></pre>

<pre><code class="language-python">condition=np.isnan(arr1)
</code></pre>

<pre><code class="language-python">np.where(condition,0,arr1)
</code></pre>

<pre><code>array([[ 1.,  2.,  0.],
       [ 4.,  5.,  0.]])
</code></pre>

<h1 id="toc_30">unique</h1>

<pre><code class="language-python">np.unique([1,2,3,3,3,3,4,5,6,6,6,6])
</code></pre>

<pre><code>array([1, 2, 3, 4, 5, 6])
</code></pre>


    

      </div>

      <div class="row">
        <div class="large-6 columns">
        <p class="text-left" style="padding:15px 0px;">
      
          <a href="15198765095343.html" 
          title="Previous Post: Hbase笔记">&laquo; Hbase笔记</a>
      
        </p>
        </div>
        <div class="large-6 columns">
      <p class="text-right" style="padding:15px 0px;">
      
          <a  href="15198716087210.html" 
          title="Next Post: 年中总结">年中总结 &raquo;</a>
      
      </p>
        </div>
      </div>
      <div class="comments-wrap">
        <div class="share-comments">
          

          

          
        </div>
      </div>
    </div><!-- article-wrap -->
  </div><!-- large 8 -->




 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <div class="site-a-logo"><img src="https://s.gravatar.com/avatar/2d9bdeec5ad2754d8a47063df1346ee8?s=80" /></div>
            
                <h1>Time渐行渐远</h1>
                <div class="site-des">Coding Changing The World</div>
                <div class="social">







<a target="_blank" class="weibo" href="http://weibo.com/hswnice" title="weibo">Weibo</a>
<a target="_blank" class="twitter" target="_blank" href="https://twitter.com/HswTime" title="Twitter">Twitter</a>
<a target="_blank" class="github" target="_blank" href="https://github.com/Timehsw" title="GitHub">GitHub</a>
<a target="_blank" class="email" href="mailto:hsw_v5@163.com" title="Email">Email</a>
  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="BigData.html"><strong>BigData</strong></a>
        
            <a href="Python.html"><strong>Python</strong></a>
        
            <a href="Linux.html"><strong>Linux</strong></a>
        
            <a href="Life.html"><strong>Life</strong></a>
        
            <a href="Spark.html"><strong>Spark</strong></a>
        
            <a href="Hive.html"><strong>Hive</strong></a>
        
            <a href="Yarn.html"><strong>Yarn</strong></a>
        
            <a href="Scala.html"><strong>Scala</strong></a>
        
            <a href="VPS.html"><strong>VPS</strong></a>
        
            <a href="MachineLearning.html"><strong>MachineLearning</strong></a>
        
            <a href="Writer.html"><strong>Writer</strong></a>
        
            <a href="Shell.html"><strong>Shell</strong></a>
        
            <a href="Algorithm.html"><strong>Algorithm</strong></a>
        
            <a href="Mac.html"><strong>Mac</strong></a>
        
            <a href="Presto.html"><strong>Presto</strong></a>
        
            <a href="Mysql.html"><strong>Mysql</strong></a>
        
            <a href="Maven.html"><strong>Maven</strong></a>
        
            <a href="Kafka.html"><strong>Kafka</strong></a>
        
            <a href="Java.html"><strong>Java</strong></a>
        
            <a href="DevTools.html"><strong>DevTools</strong></a>
        
            <a href="Hbase.html"><strong>Hbase</strong></a>
        
            <a href="ELK.html"><strong>ELK</strong></a>
        
            <a href="Druid.html"><strong>Druid</strong></a>
        
            <a href="Docker.html"><strong>Docker</strong></a>
        
            <a href="DesignPattern.html"><strong>DesignPattern</strong></a>
        
            <a href="Computer.html"><strong>Computer</strong></a>
        
            <a href="Redis.html"><strong>Redis</strong></a>
        
            <a href="Zookeeper.html"><strong>Zookeeper</strong></a>
        
            <a href="BlockChain.html"><strong>BlockChain</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="15248143200628.html">线性回归</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15242825563762.html">python-matplotlib画图中文显示不出来</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15235878044126.html">Markdown中用LaTex语法写数学公式</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15228352753621.html">如何优雅的设计数据分层</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15224029526508.html">Spark-Metrics 实战</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    <script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?2a025c7742b90ad62b1e767e1b7f2f29";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


  </body>
</html>
